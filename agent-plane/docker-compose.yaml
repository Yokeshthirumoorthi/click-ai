services:

  # ─── LLM Agent ────────────────────────────────────────────────────
  agent:
    build:
      context: ./agent
    container_name: agent
    environment:
      CH_HOST: ${CH_HOST:-clickhouse}
      CH_USER: ${CH_USER:-admin}
      CH_PASSWORD: ${CH_PASSWORD:-clickhouse123}
      CH_DATABASE: ${CH_DATABASE:-otel}
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"
    depends_on:
      clickhouse:
        condition: service_healthy
    profiles:
      - agent
    stdin_open: true
    tty: true
